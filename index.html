<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Legendary Valentine Proposal</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Calibri&display=swap');

body {
    margin: 0;
    font-family: 'Calibri', sans-serif;
    text-align: center;
    background: pink;
    overflow: hidden;
    transition: background 1s;
}

.full-screen {
    position: absolute;
    width: 100%;
    height: 100%;
    top:0; left:0;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    font-size: 32px;
    color: #b30059;
    background: pink;
    z-index: 10;
}

.tulip {
    font-size: 40px;
    margin: 5px;
}

#main-content {
    display: none;
    margin-top: 80px;
}

#message {
    font-size: 32px;
    color: #b30059;
    display: none;
    margin-top: 50px;
}

button {
    padding: 15px 30px;
    font-size: 20px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    position: absolute;
    transition: all 0.3s ease;
}

.buttons {
    margin-top: 50px;
    position: relative;
    height: 300px;
}

#yes { background-color: #ff4d6d; color:white; left: 40%; }
#no { background-color: #444; color:white; left: 55%; }

.heart, .firework {
    position: absolute;
    font-size: 20px;
    animation: fall 3s linear forwards;
}

@keyframes fall {
    0% { transform: translateY(-50px); opacity: 1; }
    100% { transform: translateY(600px); opacity: 0; }
}

.firework {
    font-size: 30px;
    animation-duration: 1.5s;
}
</style>
</head>
<body>

<!-- Intro Splash -->
<div class="full-screen" id="intro">
    <div>Here's a Legen-wait-for-it-dary Valentine Proposal for my special one ‚ù§Ô∏è</div>
    <div class="tulip">üå∑</div>
</div>

<!-- Main Proposal -->
<div id="main-content">
    <div class="buttons">
        <button id="yes">Yes üíñ</button>
        <button id="no">No üíî</button>
    </div>
    <div id="message">
        Yayy! Here's to our forever and being there for each other through thick & thin üíñ
    </div>
</div>

<audio id="music" src="https://www.bensound.com/bensound-music/bensound-romantic.mp3"></audio>

<script>
const intro = document.getElementById("intro");
const main = document.getElementById("main-content");
const yesBtn = document.getElementById("yes");
const noBtn = document.getElementById("no");
const message = document.getElementById("message");
const music = document.getElementById("music");
const buttonsContainer = document.querySelector(".buttons");

let startTime = Date.now();
let noClickCount = 0;
let shrinkSize = 1;

// Splash 5s
setTimeout(() => {
    intro.style.display = "none";
    main.style.display = "block";
}, 5000);

// Move button on hover
function moveButton(button) {
    if (Date.now() - startTime > 30000) return;
    const maxX = buttonsContainer.clientWidth - button.clientWidth;
    const maxY = buttonsContainer.clientHeight - button.clientHeight;
    button.style.left = Math.random() * maxX + "px";
    button.style.top = Math.random() * maxY + "px";
}

yesBtn.addEventListener("mouseover", () => moveButton(yesBtn));
noBtn.addEventListener("mouseover", () => moveButton(noBtn));

yesBtn.addEventListener("click", showLove);

noBtn.addEventListener("click", () => {
    noClickCount++;
    if (noClickCount === 1) noBtn.innerText = "Try again üòå";
    else if (noClickCount === 2) noBtn.innerText = "Are you sure? ü•∫";
    else if (noClickCount === 3) noBtn.innerText = "Think again üí≠";
    else if (noClickCount === 4) noBtn.innerText = "YES! üíñ";
    else if (noClickCount >= 5) showLove();
    shrinkSize -= 0.15;
    noBtn.style.transform = "scale(" + shrinkSize + ")";
});

// Show final message with minimal fireworks
function showLove() {
    buttonsContainer.style.display = "none";
    message.style.display = "block";
    music.play();
    createHearts();
    createMinimalFireworks(10); // 10 seconds minimal
}

// Hearts
function createHearts() {
    for (let i = 0; i < 20; i++) { // reduced number for minimal effect
        const heart = document.createElement("div");
        heart.classList.add("heart");
        heart.innerHTML = "üíñ";
        heart.style.left = Math.random() * window.innerWidth + "px";
        heart.style.animationDuration = (Math.random() * 2 + 2) + "s";
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 3000);
    }
}

// Minimal fireworks for X seconds
function createMinimalFireworks(durationSec) {
    const colors = ["#FFD700","#FF4500","#00FF00","#00BFFF","#FF69B4"];
    let count = 0;
    const interval = setInterval(() => {
        for(let i=0; i<5; i++){ // fewer fireworks
            const firework = document.createElement("div");
            firework.classList.add("firework");
            firework.innerHTML = "‚ú®";
            firework.style.color = colors[Math.floor(Math.random()*colors.length)];
            firework.style.left = Math.random()*window.innerWidth + "px";
            firework.style.top = Math.random()*window.innerHeight/2 + "px";
            document.body.appendChild(firework);
            setTimeout(()=>firework.remove(), 1500);
        }
        count++;
        if(count >= durationSec) clearInterval(interval);
    }, 1000);
}
</script>
</body>
</html>